extends layout

block content
  .page-header
    h3 Party ID: #{ partyid }

  div.searchContainer(ng-app="searchApp")

    div.searchController(ng-controller="searchController")

      form.form-horizontal
        .form-group
          label(class='col-sm-2 control-label', for='query') Query
          .col-sm-8
            input.form-control(type='text', name='query', id='query', ng-model="query", autofocus=true)
            input(ng-model="csrf_token" type='hidden', name='_csrf', value=_csrf)
            button.btn.btn-primary(ng-click="getSongs()") Search
            div.results
              <p>
              </p>
              <table>
              <tr ng-repeat="track in tracks">
              <td>{{ track.name }} by {{ track.artists}} </td>
              //<td> <a href= "" + {{ track.id}} > add this song to queue</a>  </td>
              <td>
              // now have to create a page/ function that will show party queue for this to work
              // instead of track.id; might want to send the whole object!
              |<button class="btn btn-primary" ng-click="addSong(track.id, '#{ partyid }' )"> add this song to queue</button>

              </td>
              </tr>
              </table>

      <p>
      </p>
      <table>
      <tr ng-repeat="partysong in partysongs">
      <td>
      <table>
      <tr>
      <td>{{ partysong.songid }} -- {{ partysong.votes }} </td>
      </tr>
      <tr>
      <td>
      | <button class="btn btn-primary" ng-click="UpSong(partysong.songid, '#{ partyid }' )"> Vote up</button>
      | <button class="btn btn-primary" ng-click="DownSong(partysong.songid, '#{ partyid }' )"> Vote down</button>
      </td>
      </tr>
      </table>
      </td>
